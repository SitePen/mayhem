<!DOCTYPE html>
<html>
<head>
	<title>Mayhem Widget Test</title>
	<link rel='stylesheet' href='../../../dijit/themes/claro/claro.css'>
</head>
<body class='claro'>
	<style>
		.labelWidget.requiredField {
			text-decoration: underline;
		}
	</style>
	<script>

	var dojoConfig = {
		baseUrl: '../../..',
		packages: [
			'dojo',
			'dijit',
			{
				name: 'widget',
				location: 'framework/widget'
			},
			'framework'
		]
	};

	</script>
	<script src='../../../dojo/dojo.js'></script>

	<button id='button' name='button'>Button</button>

	<input id='checkbox1' name='checkbox1' type='checkbox' value='checkbox-value' checked>
	<label for='checkbox1'>Check me!</label>

	<input id='radiobutton1' name='radiobutton' type='radio' value='radio-value1' checked>
	<label for='radiobutton1'>One</label>

	<input id='radiobutton2' name='radiobutton' type='radio' value='radio-value2'>
	<label for='radiobutton2'>Two</label>

	<input id='radiobutton3' name='radiobutton' type='radio' value='radio-value2'>
	<label for='radiobutton3'>Three</label>

	<input id='textfield1' name='textfield1' type='text'>

	<script>

	var button1,
		button2,
		checkbox,
		radioButton1,
		radioButton2,
		radioButton3,
		textField,
		textArea,
		select,
		filteringSelect,
		label,
		errorWidget,
		model;

	require([
		'dojo/_base/declare',
		'widget/Button',
		'widget/Checkbox',
		'widget/RadioButton',
		'widget/TextField',
		'widget/TextArea',
		'widget/Select',
		'widget/FilteringSelect',
		'dojo/store/Memory',
		'widget/Label',
		'widget/Error',
		'framework/Model',
		'framework/validators/RequiredValidator',
		'dojo/domReady!'
	], function(declare, Button, Checkbox, RadioButton, TextField, TextArea, Select, FilteringSelect, Memory, Label, Error, Model, RequiredValidator) {
		var body = document.body;

		button1 = new Button({}, 'button');
		button1.startup();

		button2 = new Button({
			name: 'button2',
			value: 'woot',
			label: 'Button2'
		});
		body.insertBefore(button2.domNode, button1.domNode.nextSibling);
		button2.startup();

		checkbox = new Checkbox(null, 'checkbox1');

		checkbox.startup();

		radioButton1 = new RadioButton(null, 'radiobutton1');
		radioButton1.startup();

		radioButton2 = new RadioButton(null, 'radiobutton2');
		radioButton2.startup();

		radioButton3 = new RadioButton(null, 'radiobutton3');
		radioButton3.startup();

		textField = new TextField(null, 'textfield1');
		textField.startup();

		textArea = new TextArea({
			style: {
				height: '13em'
			}
		});
		body.appendChild(textArea.domNode);
		textArea.startup();

		select = new Select({
			itemIdentifierProperty: 'id',
			itemLabelProperty: 'name',
			items: [
				{
					id: 'snover',
					name: 'Colin'
				}, {
					id: 'hockey',
					name: 'Ben'
				}, {
					id: 'payton',
					name: 'Brandon'
				}, {
					id: 'khalsa',
					name: 'Mangala'
				}
			]
		});
		body.appendChild(select.domNode);
		select.startup();

		var sampleStore = new Memory({
			idProperty: 'id',
			data: [
				{name:"Alabama", id:"AL"},
				{name:"Alaska", id:"AK"},
				{name:"American Samoa", id:"AS"},
				{name:"Arizona", id:"AZ"},
				{name:"Arkansas", id:"AR"},
				{name:"Armed Forces Europe", id:"AE"},
				{name:"Armed Forces Pacific", id:"AP"},
				{name:"Armed Forces the Americas", id:"AA"},
				{name:"California", id:"CA"},
				{name:"Colorado", id:"CO"},
				{name:"Connecticut", id:"CT"},
				{name:"Delaware", id:"DE"}
			]
		});

		filteringSelect = new FilteringSelect({
			store: sampleStore,
			itemLabelProperty: 'name'
		});
		body.appendChild(filteringSelect.domNode);
		filteringSelect.startup();

		var CustomModel = declare(Model, {
			_schema: {
				field1: 'string',
				field2: 'string'
			},
			_validators: {
				field1: [ new RequiredValidator() ],
				field2: []
			}
		});
		model = new CustomModel();

		label = new Label({
			text: 'Underlined if Field is Required',
			viewModel: model,
			fieldName: 'field1'
		});
		body.appendChild(label.domNode);
		label.startup();

		validationButton = new Button({ label: 'Validate' });
		validationButton.on('click', function () { model.validate(); });
		body.appendChild(validationButton.domNode);
		validationButton.startup();

		errorWidget = new Error({
			viewModel: model,
			fieldName: 'field1'
		});
		body.appendChild(errorWidget.domNode);
		errorWidget.startup();
	});

	</script>
</body>
</html>
