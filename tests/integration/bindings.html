<!DOCTYPE html>
<html>
	<head>
		<style>
			body {
				margin: 1em !important;
			}

			/* dgrid list autoheight */
			.dgrid.dgrid-list {
				border: none;
				height: auto;
			}
			.dgrid.dgrid-list .dgrid-scroller {
				position: relative;
				overflow-y: hidden;
			}
		</style>
	</head>
	<body class="claro">
		<script>
var dojoConfig = {
    async: true,
    baseUrl: '../../../',
    packages: [
        'dojo',
        'dijit',
        'dgrid',
        'xstyle',
        'put-selector',
        'dstore',
        'framework'
    ]
};
	</script>
	<script src="../../../dojo/dojo.js"></script>
	<script>
require([
	'framework/Application',
	'framework/ui/Master',
	'framework/tests/integration/MyMediator',
	'framework/tests/integration/MyModel',
	'framework/templating/html!./bindings.tmpl.html',
	'xstyle/css!dijit/themes/claro/claro.css',
	'xstyle/css!dijit/themes/claro/document.css'
], function (Application, Master, MyMediator, MyModel, BindingsView) {
	var app = window.app = new Application({
		modules: { router: null }
	});

	app.startup().then(function () {
		var firstNameRE = /^[a-zA-Z]+$/;
		var model = window.model = new MyModel();
		var mediator = window.mediator = new MyMediator({
			app: app,
			model: model
		});

		var view = window.view = new BindingsView();
		view.set('app', app);
		view.set('mediator', mediator);

		var masterView = new Master({
			app: app,
			mediator: mediator
		});
		masterView.add(view);
		masterView.attachToWindow(document.body);

		// Wait a few seconds and push to observables
		setTimeout(function() {
			mediator.get('hobbies').splice(1, 1, 'foo', 'bar', 'baz');
			mediator.get('phone_numbers').put({
				id: 'tertiary',
				type: 'bar',
				value: '800-123-4567'
			});
		}, 2000);
	});
});
		</script>
	</body>
</html>
