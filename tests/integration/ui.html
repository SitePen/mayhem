<!DOCTYPE html>
<html>
	<head>
	</head>
	<body>
		<script>
var dojoConfig = {
	async: true,
	baseUrl: '../../../',
	packages: [
		'dojo',
		'dijit',
		'dstore',
		'framework'
	]
};
	</script>
	<script src="../../../dojo/dojo.js"></script>
	<script>
require([
	'framework/Application',
	'framework/ui/dom/Master',
	'framework/tests/integration/MyMediator',
	'framework/tests/integration/MyModel',
	'framework/templating/html!./template.html',
], function (Application, Master, MyMediator, MyModel, processTemplate) {
	var app = window.app = new Application({
		modules: { router: null }
	});

	app.startup().then(function () {
		var firstNameRE = /^[a-zA-Z]+$/;
		var model = window.model = new MyModel();
		var mediator = window.mediator = new MyMediator({
			app: app,
			model: model
		});

		var masterView = new Master({});
		masterView.attachToWindow(document.body);
		masterView.add(processTemplate(app, mediator));

		// Push to observable hobbies array
		setTimeout(function() {
			mediator.get('hobbies').push('foo', 'bar');
			mediator.get('phone_numbers').put({ id: 'tertiary', type: 'bar', value: '800-123-4567' } );
		}, 2000);
	});
});
		</script>
	</body>
</html>
