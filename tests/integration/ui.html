<!DOCTYPE html>
<html>
	<head>
	</head>
	<body>
		<script>
var dojoConfig = {
	async: true,
	baseUrl: '../../../',
	packages: [
		'dojo',
		'dijit',
		'dstore',
		'framework'
	]
};
		</script>
		<script src="../../../dojo/dojo.js"></script>
		<script>
require([
	'dstore/Model',
	'framework/Application',
	'framework/Mediator',
	'framework/ui/Widget!Master',
	'framework/ui/Widget!form/Input',
	'framework/ui/Widget!form/Error',
	'framework/ModelProxty'
], function (Model, Application, Mediator, Master, Input, FormError, ModelProxty) {
	var app = new Application({
		modules: { router: null }
	});

	app.startup().then(function () {
		var firstNameRE = /^[a-zA-Z]+$/;
/*		var model = window.model = new Model({
			schema: {
				firstName: {
					type: 'number',
					required: true,
					validate: function () {
						if (!firstNameRE.test(this.get())) {
							this.set('errors', ['poop']);
						}
					}
				}
			},
			firstName: 'Joe',
			lastName: 'Bloggs'
		});*/
		var mediator = window.mediator = new Mediator({
			app: app,
			model: null,
			firstName: new ModelProxty('Joe'),
			lastName: new ModelProxty('Bloggs')
		});

		var input = window.input = new Input({ app: app, mediator: mediator });
		input.bind('value', 'firstName', { direction: 2 });

		var error = window.formError = new FormError({
			app: app,
			mediator: mediator,
			binding: 'firstName'
		});

		var masterView = new Master({});
		masterView.attachToWindow(document.body);
		masterView.add(input);
		masterView.add(error);
	});
});
		</script>
	</body>
</html>
